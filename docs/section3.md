# 단축 URL 조회 API 성능 개선하기
## 조회 API 개선 방법 고민해보기
1. 인덱스 추가
2. 캐시를 활용한 성능 개선
3. redirectCount 증가를 모아서 처리

## 인덱스 추가
* 인덱스 제거
```shell
http.response_time:
  min: ............ 56
  max: ............ 9955
  mean: ........... 2763.6
  median: ......... 1436.8
  p95: ............ 8868.4
  p99: ............ 9801.2
```

* 인덱스 적용
```shell
http.response_time:
  min: ............ 35
  max: ............ 360
  mean: ........... 44
  median: ......... 43.4
  p95: ............ 50.9
  p99: ............ 66
```

## 캐시를 활용한 성능 개선
* 캐시 적용 전
```shell
http.response_time:
  min: ............ 35
  max: ............ 360
  mean: ........... 44
  median: ......... 43.4
  p95: ............ 50.9
  p99: ............ 66
```

* 1차 부하 테스트
```shell
http.response_time:
  min: ............ 34
  max: ............ 866
  mean: ........... 46.7
  median: ......... 44.3
  p95: ............ 62.2
  p99: ............ 79.1
```
* 모든 데이터가 캐싱 된 후
```shell
http.response_time:
  min: ............ 34
  max: ............ 174
  mean: ........... 40.9
  median: ......... 40
  p95: ............ 47.9
  p99: ............ 54.1
```
* Redis를 활용한 캐시 구성후 1차 부하 테스트
```shell
http.response_time:
  min: ............ 35
  max: ............ 2623
  mean: ........... 56.6
  median: ......... 45.2
  p95: ............ 71.5
  p99: ............ 102.5
```
* 모든 데이터가 캐싱 된 후
```shell
http.response_time:
  min: ............ 34
  max: ............ 105
  mean: ........... 41.7
  median: ......... 40.9
  p95: ............ 47.9
  p99: ............ 58.6
```



## redirectCount 증가를 모아서 처리하기
```shell
http.response_time:
  min: ............ 32
  max: ............ 62
  mean: ........... 37.5
  median: ......... 37
  p95: ............ 43.4
  p99: ............ 44.3
```

